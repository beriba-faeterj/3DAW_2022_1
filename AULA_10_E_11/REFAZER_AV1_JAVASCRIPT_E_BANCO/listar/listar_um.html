<!DOCTYPE html>
<html>

<!--

Nome: Lucas Beriba
Matrícula: 2110478300001

Aulas 10 e 11 - 02/06/2022 e 09/06/2022 - Refazer AV1 com banco de dados

-->

<head>
	<title>Listar um -- Aulas 10 e 11 - Beriba - 3DAW Manhã - 2022.1</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="../formatacao.css">

	<script>
        function isJSON(string) {  
            try {
                JSON.parse(string);  
            } catch (e) {
                return false;
            }

            return true;
        };

        function enviaForm() {
            const funcionario = {
                "matricula": document.getElementById("matricula").value
            };

            const func = JSON.stringify(funcionario);

            const xmlhttp = new XMLHttpRequest();

            xmlhttp.onload = function() {
                const retorno = xmlhttp.responseText;

                document.getElementById("matricula").value = null;

                // PRECISAR PARSAR O JSON

                if (isJSON(retorno) == false) {
                    document.getElementById("retorno").innerHTML = retorno;
                }
                else {
                    document.getElementById("retorno").innerHTML = retorno;
                }
            }

            xmlhttp.open("GET","listar.php?matr=" + func);
            xmlhttp.send();
        }
    </script>
</head>
<body>
    <nav class="flex-container">
        <div><a href="../index.html">Início</a></div>
        <div><a href="../incluir/incluir.html">Incluir</a></div>
        <div><a href="../alterar/alterar.html">Alterar</a></div>
        <div><a href="listar_todos.html">Listar todos</a></div>
        <div><a href="">Listar um</a></div>
        <div><a href="../excluir/excluir.html">Excluir</a></div>
    </nav>
    <main>
        <form action="listar.php" method="GET">
            Matrícula: <input type="text" name="matricula" id="matricula" value="">
            <input type="button" name="enviar" name="enviar" value="Enviar" onClick="enviaForm();">
        </form>
        <div id="retorno"></div>
    <main>
</body>
</html>

